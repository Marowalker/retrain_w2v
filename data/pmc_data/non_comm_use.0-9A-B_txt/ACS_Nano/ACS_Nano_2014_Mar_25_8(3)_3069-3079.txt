
==== Front
ACS NanoACS Nanonnancac3ACS Nano1936-08511936-086XAmerican Chemical Society 10.1021/nn500614kArticleImmunochromatographic Diagnostic Test Analysis Using Google Glass Feng Steve †‡Caire Romain †‡Cortazar Bingen †‡Turan Mehmet †‡Wong Andrew †‡Ozcan Aydogan †‡§⊥*†Electrical Engineering Department, ‡Bioengineering Department, §California NanoSystems Institute, and ⊥Department of Surgery, David Geffen School of Medicine, University of California, Los Angeles, California 90095, United States* Address correspondence to ozcan@ucla.edu.27 02 2014 25 03 2014 8 3 3069 3079 30 01 2014 20 02 2014 Copyright © 2014 American Chemical Society2014American Chemical SocietyTerms of Use

We demonstrate a Google Glass-based rapid diagnostic test (RDT) reader platform capable of qualitative and quantitative measurements of various lateral flow immunochromatographic assays and similar biomedical diagnostics tests. Using a custom-written Glass application and without any external hardware attachments, one or more RDTs labeled with Quick Response (QR) code identifiers are simultaneously imaged using the built-in camera of the Google Glass that is based on a hands-free and voice-controlled interface and digitally transmitted to a server for digital processing. The acquired JPEG images are automatically processed to locate all the RDTs and, for each RDT, to produce a quantitative diagnostic result, which is returned to the Google Glass (i.e., the user) and also stored on a central server along with the RDT image, QR code, and other related information (e.g., demographic data). The same server also provides a dynamic spatiotemporal map and real-time statistics for uploaded RDT results accessible through Internet browsers. We tested this Google Glass-based diagnostic platform using qualitative (i.e., yes/no) human immunodeficiency virus (HIV) and quantitative prostate-specific antigen (PSA) tests. For the quantitative RDTs, we measured activated tests at various concentrations ranging from 0 to 200 ng/mL for free and total PSA. This wearable RDT reader platform running on Google Glass combines a hands-free sensing and image capture interface with powerful servers running our custom image processing codes, and it can be quite useful for real-time spatiotemporal tracking of various diseases and personal medical conditions, providing a valuable tool for epidemiology and mobile health.

Google Glassrapid diagnostic test readercolorimetric sensorlateral flow immunochromatographic assaysHIV testingprostate-specific antigen (PSA) testmobile healthNational Institutes of Health, United Statesdocument-id-old-9nn500614kdocument-id-new-14nn-2014-00614kccc-price
==== Body
Early detection of emerging public health threats is very important to prevent long-term undesired effects and reduce disease burden globally. Over the past decade, lateral flow based immunochromatographic tests or rapid diagnostic tests (RDTs), which are in general based on light scattering off surface-functionalized metallic nanoparticles, have emerged as a quick and cost-effective method to screen various diseases providing complementary approaches to conventional medical practices, such as clinical examination, microscopic analysis, and investigation. RDT technologies have since provided various advantages for tackling public health problems including, but not limited to, more effective tracking/monitoring of chronic conditions, infectious diseases and drugs of abuse in at-risk areas, and widespread medical testing by minimally trained medical personnel or community healthcare workers.1−20

In parallel, the recent advances in portable wireless telecommunication technologies, especially mobile phones, provide remarkable opportunities for healthcare applications in a variety of fields including epidemic preparedness, public health monitoring, and distributed healthcare systems.21−31 In addition to mobile phones, of particular interest are emerging wearable electronics devices such as smart watches and glasses with integrated or attachable inertia sensors, audio-visual imaging and recording devices, and wireless connectivity.32−35 One such promising smart device, the Google Glass, consists of a voice-controllable hands-free computing system with imaging and video-recording capabilities and various wireless technologies including Bluetooth and Wi-Fi (see Figure 1a). By connecting with Android mobile phones or iPhones through Bluetooth, the Google Glass is also capable of using the cellular device’s telecommunications capabilities to access the Internet in areas without Wi-Fi and determine location information via global positioning systems (GPS) and/or triangulation through cellular service provider towers.

Figure 1 Labeled Google Glass and demonstration of imaging a rapid diagnostic test (RDT). (a) Front-profile view of the Google Glass with various hardware components36 labeled. (b) Example of using the Glass for taking an image of an RDT as part of our RDT reader application.

Leveraging the advantages of these new platforms, here we introduce an RDT reader technology integrated on the Google Glass. This wearable computational platform allows for rapid hands-free imaging and processing of any number of RDTs, which can be very useful for disease and medical condition testing and monitoring in remote locations, disaster relief areas, or quarantine zones. The RDTs to be imaged can be either held in the user’s hand (see Figure 1b) or laid flat on a surface. Using a Quick Response (QR) code37 identifier, which is custom-designed and attached to each RDT cassette, this system is capable of automatically finding and identifying the type of the RDT of interest, along with other information (e.g., patient data) that can be linked to the same QR code. Adding the ability to recognize and process additional RDT types can then be done on our centralized servers without any need to update the Google Glass RDT reader software. Furthermore, our servers provide a centralized database and Web interface for visualizing uploaded data in the form of a spatiotemporal map, which can be quite useful for short- and long-term spatiotemporal tracking of the evolution of infectious diseases and other conditions.

Over the past several years, there has been considerable research and development effort to create automated digital test readers capable of both qualitative and quantitative analysis of RDTs.38−47 These have mainly appeared in the form of bulky but high-throughput desktop readers which generally read only a specific set of RDTs. More recently, mobile-phone-based readers capable of working with a number of tests have also been introduced.48−50 For example, in our previous work,48 we created a compact and cost-effective RDT reader optical attachment installed on a cell phone that can work with various lateral flow immunochromatographic assays to detect the presence and strength of a target analyte. Other approaches include LMD (Mobile Assay, CO, USA), whom use a custom software application running on a cell phone.51 However, these mobile technologies do not provide the ability to image and process multiple RDT tests simultaneously and require manual handling of both the RDT test and the mobile phone camera. Here, we replace all the external opto-mechanical hardware attachments with customized image processing techniques to create an RDT reader software application capable of detecting and processing multiple RDTs imaged using the Google Glass built-in camera under natural illumination conditions along with a hands-free sensing and image capture interface. Therefore, our RDT reader application on Google Glass retains the mobile interface while allowing for multiplexed imaging of various types of RDTs from different manufacturers. Utilizing the existing camera module and the continuous wireless connectivity of the Google Glass, we combine this hands-free sensing and image capture interface with powerful servers running our custom image processing codes to merge the advantages of desktop readers with those of mobile readers. Additionally, our system integrates into a global network of lab-on-a-chip applications, allowing for quick retrieval of RDT results through the same Google Glass interface.

We tested this Google Glass-based RDT reader platform through human immunodeficiency virus (HIV) and prostate-specific antigen (PSA) rapid tests (see Figure 2) by installing our application on Google Glass devices obtained as part of the Google Glass Explorer program. The PSA test is routinely used for prostate cancer screening and surveillance in men. Recent work has suggested that the ratio of free PSA to total PSA (i.e., free plus those bound to other proteins) and the rate of increase in PSA level can collectively predict the presence and aggressiveness of prostate cancer.52−55 For our proof-of-concept demonstration experiments, we imaged these RDTs under fluorescent illumination indoor conditions with relatively simple backgrounds, for example, walls that are commonly found in buildings. We believe that this wearable RDT reader platform running on Google Glass can be quite useful for epidemiology and mobile-health applications by providing real-time spatiotemporal tracking of various diseases and personal medical conditions through a rapid hands-free and high-throughput imaging interface.

Figure 2 Rapid diagnostic tests used in this work. (a) JAJ International free PSA test; (b) JAJ International total PSA test; (c) OraQuick ADVANCE Rapid HIV-1/2 test; (d) OraQuick In-Home HIV test (approved by the U.S. Food and Drug Administration).

Results and Discussion
System Design
As part of our diagnostic system, we designed a custom Google Glass RDT reader application for capturing RDT images, a Web portal for generating custom QR code-based identifiers and viewing test results, and the server processes for rapid and high-throughput digital evaluation of test results from any number of devices, with results ready within 8 s per test (see Figures 3 and 4). After installing the Google Glass RDT application, the users are able to image new RDTs and view previously evaluated tests. Users must first use our custom-designed Web site to input RDT test information and generate a corresponding QR code identifier, which can then be attached to the tests prior to imaging (see Figures 3 and 4). As the hardware on the Google Glass is ill-suited for computationally intensive tasks, we do not process test images on the device. Instead, RDT images are transferred wirelessly using Wi-Fi or through a Bluetooth-matched device’s wireless connection (e.g., Wi-Fi, GSM, CDMA, etc.) to our servers for rapid digital processing and evaluation (see Figure 3b). In case wireless connectivity is not available, test results can be stored locally on the Google Glass and automatically uploaded to our servers for processing once connectivity becomes available. After evaluation, test results are securely stored on the server under the Google account registered with the Glass and also sent back to the Google Glass and shown to the user in the form of a Timeline Card populated with the RDT image and test type-specific results (see Figure 3c).

Figure 3 Block diagram of the rapid diagnostic test (RDT) imaging and processing workflow (a–c) done by the Google Glass application (red dashed frame) and server processes (green dashed frame). In this case, a single RDT is analyzed.

RDT Reader Application on Google Glass
The RDT reader application appears on the Google Glass as a static card in the Google Glass Timeline. Through this digital card, the user can start the process of taking images of QR code-labeled RDTs. The QR code label for each test is printed after filling in a form on our custom-designed Web site (http://devpc02.ee.ucla.edu/rdtonglass), where the user can input various RDT parameters including the test type (for example OraQuick ADVANCE Rapid HIV-1/2 antibody test, OraQuick In-Home HIV test,56−59 JAJ Free PSA, JAJ Total PSA60−62), lot number, and patient ID, etc. (see Figure 4a).

Figure 4 Our custom-designed Web interface of the QR code generator and real-time rapid diagnostic test (RDT) map (available at http://devpc02.ee.ucla.edu/rdtonglass). (a) QR code generator takes in and stores the information for one or more RDTs and produces a QR code identifier to be printed and attached to each physical test. (b) RDTs processed by each user can be viewed on this Google Maps-powered interface. Results can be sorted/searched by various attributes including disease type, test location, time and date, RDT type, etc. Image Credit: Google Maps, Imagery ©2014, Digital Globe, U.S. Geological Survey, USDA Farm Service Agency.

After starting a new test, a camera preview will appear in the Google Glass viewing window with a vertical test outline overlay to assist the user in placing or holding the RDT at a specified distance and orientation. The size and orientation of the RDT in the captured image is important for several reasons. All Google Glass camera system hardware iterations up to now seem optimized for capturing images >2 ft away from the camera. These systems did not include an adjustable lens on the camera, and therefore, they result in out-of-focus blur for imaging of objects closer to the Glass. Thus to maximize resolution while preventing significant focus blur, we chose an overlay size occupying approximately 70% of the vertical resolution of the Glass. To reduce shadowing on the strip region by the RDT casing, we orient the overlay vertically under the assumption that light sources will be strongest above and below the test cassette. Additionally, the activation and imaging procedures for some RDTs such as the OraQuick HIV tests require the test remain vertical. After aligning the RDT into the overlay, the user can then take the image by tapping on the touchpad of the Glass or through the voice-activated image capture interface of Glass. In future iterations, QR code-activated automated imaging can also be implemented.

The captured Glass image then undergoes Google’s automatic image enhancement to produce a higher contrast smoothened image, which typically requires <3 s. After showing the enhanced image to the user through the Glass interface, this image is uploaded to our servers for further processing as detailed in Figure 3. Next, the server processes the test image, and the result is returned to the Glass and displayed to the user in the form of a “result card”, posted to the Timeline (see Figure 3c), populated with the cropped image region, test type, test validation (valid/invalid), and assessment of the diagnostic results (positive/negative and/or concentration level, for qualitative and quantitative tests, respectively). Evaluated tests can also be viewed independently on a real-time RDT monitoring server through an Internet browser. Test results are shown geographically using Google Maps and in more detail through a table that is filterable by RDT or specific parameters of the patient and/or disease (see Figure 4b).

Glass-Based HIV and PSA Testing Results
We validated the ability of our Google Glass-based RDT reader platform to perform both qualitative decisions and quantitative measurements for several lateral flow-based immunochromatographic RDTs (see Figure 2). For qualitative validation, we used the FDA-approved OraQuick In-Home HIV test and the OraQuick ADVANCE Rapid HIV-1/2 antibody test (OraSure Technologies, Inc., PA, USA). For quantitative test validation, we used free and total PSA Rapid tests (JAJ International, Inc., CA, USA). To activate these HIV and PSA tests, we used OraQuick ADVANCE Rapid HIV-1/2 antibody test kit positive and negative controls (OraSure Technologies, Inc., PA, USA) containing HIV-1 and HIV-2 antibodies in human plasma and free and total PSA positive and negative controls provided by the test manufacturer (JAJ International, Inc., CA, USA) containing free PSA and total PSA (free PSA with PSA-ACT) in serum, respectively.

We started by evaluating the performance of our Glass platform for making qualitative decisions on OraQuick HIV RDTs. After activating these RDTs using the OraQuick positive controls for HIV-1 and HIV-2 separately and the OraQuick negative control as specified by the manufacturer, we marked each RDT using a QR code identifier generated using our online tool. We then validated test results visually and confirmed detection and evaluation of negative and positive HIV-1 and HIV-2 test lines using our RDT reader. We note that the OraQuick ADVANCE Rapid HIV-1/2 antibody tests and OraQuick In-Home HIV tests did not have significant differences at the same activation concentration levels and were thus used interchangeably in our testing procedures. To demonstrate the performance of our Glass software system at identifying “difficult” samples, we also imaged and evaluated HIV RDTs activated with highly diluted positive control samples, such that we achieved dilutions of 2-, 3-, 4-, 5-, and 6-fold by adding phosphate buffer solution (PBS) to the manufacturer-provided reagent solution used for activating the HIV RDTs. Visual inspection of these tests noticed much fainter test line responses for higher dilution factors.

To test our platform, we imaged each one of our 31 activated HIV RDTs up to 50 times each for a total of 281 images. These images were captured with the RDT held up vertically in front of the Glass (see Figure 1b) and included some minor tilts of the RDT plane relative to the camera and illumination differences caused by Google’s automatic image enhancement, both of which did not affect our detection accuracy. We first validated our support vector machine-based (SVM)63−65 approach that requires training a classifier using known labeled (e.g., yes/no) strip images, using a leave-one-out cross-validation technique,66 the results of which are summarized in Table 1a. This technique trains an SVM classifier on all but one input image and classifies the remaining image using the trained classifier, repeating for all the images in the data set to compile accuracy statistics.66 This validation achieved correct diagnosis on all the 281 images of OraQuick ADVANCE Rapid HIV-1/2 antibody tests for up to even 5× dilution factors. To further demonstrate the robustness of our technique for OraQuick RDT HIV classification, we activated and imaged a new testing set composed of 12 OraQuick In-Home HIV tests (2 with negative controls; 5 with HIV-1 controls and 5 with HIV-2 controls diluted by 2× to 6×). Each of these tests was imaged up to 35 times for a total of 145 images. We then used the previously imaged 281 images as training data for a new SVM classifier and tested the resulting classifier on these new 145 images, achieving 100% classification accuracy, that is, correctly diagnosing all the activated RDTs (see Table 1b). We should emphasize that for the set of controls we used, the OraQuick ADVANCE Rapid HIV-1/2 antibody tests and OraQuick In-Home HIV tests, provided sufficiently similar responses that our classifier is capable of using images of these tests “interchangeably” without degradation in classification accuracy. Furthermore, while our training data contained HIV tests activated using positive controls with dilutions from 1× to 5×, our new testing data contained HIV tests activated with dilutions up to 6×, suggesting the possibility that detection of even fainter test lines may be possible using Glass even without specifically training the classifier for those weaker antibody/antigen concentrations.

Table 1 a
a (a) Support vector machine (SVM) classifier63−65 cross-validation results for total training image set of 281 images taken from 18 OraQuick ADVANCE Rapid HIV-1/2 antibody tests, 3 tests for each concentration level (negative, 1×, 2×, 3×, 4×, and 5× dilution). Leave-one-out cross-validation66 trains an SVM classifier on all but one test image and then tests the trained classifier on the left-out test image. The table compiles validation results for all test images. (b) After training an SVM classifier using all the 281 training images, the SVM classifier is tested on a new test set composed of 145 images taken from 12 OraQuick In-Home HIV tests, 2 tests for each concentration level (negative, 2×, 3×, 4×, 5×, and 6× dilution).

After successfully validating our qualitative (yes/no) performance even under highly diluted control samples, next we moved to evaluating the performance of our Glass platform for making quantitative measurements of PSA RDTs. We activated these RDTs using manufacturer-provided controls at 0, 2, 4, 8, 10, 20, 100, and 200 ng/mL concentrations for free PSA RDTs and at 0, 6, 8, 10, 20, and 40 ng/mL concentrations for total PSA RDTs. As before, each RDT is marked using a QR code identifier generated using our online tool (http://devpc02.ee.ucla.edu/rdtonglass). We activated and imaged 14 PSA tests, activating 1 at each concentration for free and total PSA and imaging the activated test up to 10 times each, under the same illumination conditions with the test held vertically in front of the Glass (see Figure 1b). After Glass-based imaging and digital processing of these test images as described in the Methods section, we were able to observe linearity between PSA concentration (ng/mL) and the test line intensity values read for both free and total PSA (see Figure 5). In our free PSA experiments (Figure 5a), concentrations above 20 ng/mL start saturating, breaking the linearity of our response curves. We should note that, for assisting early stage diagnosis of cancer, the most relevant free PSA levels are below 20 ng/mL.61,62

Figure 5 Calibration curves for free and total PSA under bright fluorescent illumination. (a) Free PSA calibrated using samples taken at 0, 2, 4, 8, 10, and 20 ng/mL (ppb). Additional samples taken at 100 and 200 ng/mL are also shown. (b) Total PSA calibrated using samples taken at 0, 6, 8, 10, 20, and 40 ng/mL.

Additionally, to demonstrate the ability of this system for multiplexed RDT processing, we imaged using Glass several sets of the previously activated free PSA and total PSA RDTs placed next to each other on a table (see Figure 6). In these 25 images taken with up to four PSA RDTs per image, we correctly detected and evaluated all PSA tests with minimal differences in test line intensity compared to single RDT images taken in front of the Glass. Since our methodology normalizes using the control line, general illumination changes as caused by placing multiple tests farther from the center of the imaging area (see Figure 6a,b) do not significantly alter test results compared to those from single RDT images for the same tests.

Figure 6 Multiplexed prostate-specific antigen rapid diagnostic test (RDT) processing example. (a) Starting with the original Glass image, the QR codes are detected using either iterative speeded-up robust features (SURF)67 matching or edge-based location module detection. (b) Afterward, each QR code is reconstructed and read. (c,d) Each test is processed and quantified to produce a test line value, simultaneously quantifying the free and total PSA (in ng/mL).

In our results presented so far, QR code detection and processing succeeded in 99.6% of all cases. In a separate evaluation of our QR code system, we attached QR codes onto >60 activated HIV and PSA RDTs and took >300 images containing both single RDTs and multiple RDTs both held vertically in front of the Glass and laid on a flat surface. Compared to our previous experiments, we included images of RDTs with motion blur or misaligned RDTs and at distances spanning from 0.125 to 1.5 ft. On these images, our system for finding the relatively blurry QR codes captured by the Google Glass achieved an accuracy of 96.6%. The majority of failures during this detection step were caused during the detection of the RDT either by the RDT being at a significant out-of-plane tilt compared to the Glass or from motion blur when RDTs were held in front of the Glass camera. Following this detection step, we tested our system for reconstruction and reading of the code on those detected QR codes and achieved a 100% reading rate. We note that the QR code detection is a significantly harder task compared to its reconstruction and reading, and therefore, we expect that any detected codes using Glass should be successfully read, as shown in this specific experiment.

Finally, we would like to emphasize that the Google Glass is still in development (we used the beta Explorer Edition), and we have been experiencing significant hardware and software updates throughout our research and development efforts. In particular, the Google Glass’s inability to focus on close objects affected our sensitivity in reading test lines, particularly at lower concentrations. Additionally, even while not using the processing power of the Glass, we were able to continuously image for approximately 1 h on average before the Glass required recharging. However, with each successive iteration of the Glass, we have experienced better performance and a longer use period and are thus confident that some of these remaining challenges will either be entirely solved or alleviated in future improvements and versions of the Glass.

Conclusions
In summary, we demonstrated a Google Glass-based RDT reader application capable of qualitative and quantitative measurements of various lateral flow assays and diagnostic tests. Using a custom-written Glass application and without any external optical hardware, one or more RDTs labeled with QR codes are imaged using the built-in camera of the Glass, and digitally transmitted to a remote server for processing. These digital test images are automatically processed to create a quantitative diagnostic result, which is then returned to the Google Glass user and stored with the RDT image and other related information on a central server providing review of diagnostics results via a world map through geo-tagged data. We demonstrated the success of this Glass-based platform on HIV and PSA RDTs. Providing real-time spatiotemporal tracking/mapping of various diseases and medical conditions, this smart RDT application for Google Glass could be quite valuable for epidemiology, mobile health, and telemedicine applications.

Methods
Automated Image Processing on the Server
QR Code Detection and Reconstruction
Once received by the server, each Glass image is first searched for the presence of our custom QR codes (see Figure 7). QR codes consist of three large double-layered square modules in the top-left, top-right, and bottom-left corners of the QR code along with a number of smaller data modules filling the remainder of the code. To maximize readability and reduce errors, we use the largest size codes available (Version 1-H), capable of encoding test identifiers of up to 17-digit numerals under a high error code correction (ECC) capability. To make detection easier, we print the QR code’s location and data modules in blue and red colors, respectively. A descriptor called speeded-up robust features (SURF)67 is used to detect scale- and rotation-invariant features in the blue channel of the RDT image. These SURF descriptors are then matched against SURF descriptors from a template QR code as demonstrated in the OpenCV library.68 Detected QR codes are then mapped back to the template using homographic transformations to map the RDT back to a vertical orientation with minimal tilt.

Figure 7 Methodology for finding QR code in a Glass image scene and segmenting the test strip region. Using a generic QR code template, we match location modules across the image using SURF.67 Detected QR codes are then reconstructed and processed, and the location is used for ratio-based segmentation of the rapid diagnostic test strip region.

We use the ZXing barcode reader library69 to process the QR codes and return the embedded identifier. Due to focus blur, this library is unable to process the cropped images directly. Instead, we first automatically reconstruct a binary QR code from the detected QR codes (see Figure 8). From the cropped QR codes, we automatically remove any remaining white borders, grayscale the image, and resize to a multiple m of the known QR code grid size of 21 pixels. We then bin the m*21 × m*21 image pixels into a 21 × 21 grid by applying a threshold on the average grayscale pixel intensity in each m × m block of pixels. This new 21 × 21 reconstructed QR code is then processed by the ZXing library to extract the test identifier.

Figure 8 Methodology for QR code reconstruction from blurry Google Glass images. To produce a QR code that is detectable using standard libraries, we perform a binned threshold across the image. Reconstructed QR codes contain errors but remain within the QR code’s error correction capabilities.

Furthermore, we also created the capability to use this Glass platform for multiplexed imaging of RDTs (see Figure 6). For simple uncluttered backgrounds, we can quickly and easily detect QR codes by finding the corner location modules as illustrated in Figure 9. Using an edge detector, we first find significant edges and fill holes created from enclosed regions. By subtracting the filled holes from the original edges, for simple backgrounds (e.g., table tops), we obtain squares indicating the QR code location markers. After eliminating noise by comparing the area ratios of the detected regions against the known regularity for QR code squares, we then identify the orientation and the size of the QR codes in the image by exploiting the QR code’s corner location module pattern. As an alternative, but more computationally involved, method for more complicated scenes, iterative SURF feature detection and matching can also be employed to find all the RDTs within the Glass image.

Figure 9 Methodology for multiplexed QR code detection for simple backgrounds. QR code corner location modules are found using an edge detector. Filtering by area ratios removes the artificial edges caused by background noise. Matching the distances between detected square centroids of similar sizes against known QR code regularities allows for detection of QR codes.

Test Evaluation from the Strip Region
After confirming that a valid identifier is attached to the test, we automatically crop the strip region by using the relative position of the QR code on the RDT (see Figure 7). In our experiments, we vertically align the QR code above the strip area and automatically crop a large rectangular region containing the boundaries of the strip region. By digitally scanning column-wise down the length of the strip, we automatically search for strong intensity valleys corresponding to the control line. A final crop is made using the inner subset of columns containing the control line. Cropped strip regions without a strong control line intensity valley in any significant subset of columns are considered “invalid” tests.

For the OraQuick HIV tests, we used average pixel intensities down the strip as our descriptor for the SVM classifier63−65 (see Figure 10). To generate these descriptors, we start by converting from RGB to grayscale and high pass filtering the image to maximize both the control and test line intensities. To deal with noise and reflections caused by a thin plastic cover over the strip region and to reduce general illumination differences across the strip, we then use a row-wise median filter to collapse the image into a column vector down the length of the strip. The pixels beyond the center of the control line serve as our descriptor for the SVM. The SVM classifier is trained using a balanced set of HIV RDTs activated using positive and negative controls and thereafter used for testing newly activated HIV RDTs (see e.g., Table 1).

Figure 10 Methodology for classifying quantitative HIV rapid diagnostic tests (RDTs). Illumination and noise interference are reduced by applying median filtering and sharpening, respectively, on the cropped strip region. The RDT strip is then aligned using the location of the control strip and then used as a descriptor for a support vector machine (SVM) classifier, which returns a positive/negative decision.

For the free and total PSA tests (from JAJ International, Inc., CA, USA), we use the ratio of the test line intensity to the control line intensity as a normalized measure of PSA concentration (see Figure 11). To reduce illumination differences across the strip, a row-wise average of the intensity along the green channel produces a column vector representation of the strip. To reduce out-of-focus noise, we cross-correlate in the first spatial derivative the control line peak with the rest of the strip to statistically determine the most likely test line location. Normalizing the test line intensity against the control line intensity produces a reliable and quantified measure of the test. Using images of free and total PSA taken with known concentration values (see, e.g., Figure 5), we can then fit standard curves to determine the concentration of PSA for sets of RDT images captured under similar illumination conditions.

Figure 11 Methodology for quantifying PSA concentrations. Row-wise averaging over the green channel reduces noise. The control and test lines are found through cross-correlation in the spatial derivative domain. We compare the normalized test value against a predetermined calibration curve to obtain the concentration of the analyte in ng/mL. Also see Figures 5 and 6c,d.

Acknowledgments
Ozcan Research Group at UCLA gratefully acknowledges the support of the Presidential Early Career Award for Scientists and Engineers (PECASE), Army Research Office (ARO) Life Sciences Division, ARO Young Investigator Award, National Science Foundation (NSF) CAREER Award, NSF CBET Division Biophotonics Program, NSF Emerging Frontiers in Research and Innovation (EFRI) Award, Office of Naval Research (ONR), and National Institutes of Health (NIH) Director’s New Innovator Award DP2OD006427 from the Office of the Director, National Institutes of Health. This work is based upon research performed in a renovated laboratory by the National Science Foundation under Grant No. 0963183, which is an award funded under the American Recovery and Reinvestment Act of 2009 (ARRA). The authors also acknowledge JAJ International, Inc. for their assistance with activating their PSA tests.

The authors declare the following competing financial interest(s): A. O. is the co-founder of a start-up company (Holomic LLC) that aims to commercialize computational microscopy and diagnostics tools.
==== Refs
References
Vasoo S. ; Stevens J. ; Singh K. 
Rapid Antigen Tests for Diagnosis of Pandemic (Swine) Influenza A/H1N1 . Clin. Infect. Dis. 
2009 , 49 , 1090 –1093 .19725784 
Banoo S. ; Bell D. ; Bossuyt P. ; Herring A. ; Mabey D. ; Poole F. ; Smith P. G. ; Sriram N. ; Wongsrichanalai C. ; Linke R. ; et al. Evaluation of Diagnostic Tests for Infectious Diseases: General Principles . Nat. Rev. Micro. 
2008 ,  S16 –S28 .
Mills L. A. ; Kagaayi J. ; Nakigozi G. ; Galiwango R. M. ; Ouma J. ; Shott J. P. ; Ssempijja V. ; Gray R. H. ; Wawer M. J. ; Serwadda D. ; et al. Utility of a Point-of-Care Malaria Rapid Diagnostic Test for Excluding Malaria as the Cause of Fever Among HIV-Positive Adults in Rural Rakai, Uganda . Am. J. Trop. Med. Hyg. 
2010 , 82 , 145 –147 .20065011 
Wongsrichanalai C. ; Barcus M. J. ; Muth S. ; Sutamihardja A. ; Wernsdorfer W. H. 
A Review of Malaria Diagnostic Tools: Microscopy and Rapid Diagnostic Test (RDT) . Am. J. Trop. Med. Hyg. 
2007 , 77 , 119 –127 .18165483 
Dhorda M. ; Piola P. ; Nyehangane D. ; Tumwebaze B. ; Nalusaji A. ; Nabasumba C. ; Turyakira E. ; McGready R. ; Ashley E. ; Guerin P. J. ; et al. Performance of a Histidine-Rich Protein 2 Rapid Diagnostic Test, Paracheck Pf®, for Detection of Malaria Infections in Ugandan Pregnant Women . Am. J. Trop. Med. Hyg. 
2012 , 86 , 93 –95 .22232456 
Okeke I. N. ; Peeling R. W. ; Goossens H. ; Auckenthaler R. ; Olmsted S. S. ; de Lavison J.-F. ; Zimmer B. L. ; Perkins M. D. ; Nordqvist K. 
Diagnostics as Essential Tools for Containing Antibacterial Resistance . Drug Resist. Updates 
2011 , 14 , 95 –106 .
Drakeley C. ; Reyburn H. 
Out with the Old, in with the New: The Utility of Rapid Diagnostic Tests for Malaria Diagnosis in Africa . Trans. R. Soc. Trop. Med. Hyg. 
2009 , 103 , 333 –337 .19019399 
Murray C. K. ; Gasser R. A. ; Magill A. J. ; Miller R. S. 
Update on Rapid Diagnostic Testing for Malaria . Clin. Microbiol. Rev. 
2008 , 21 , 97 –110 .18202438 
Wu S.-J. L. ; Paxton H. ; Hanson B. ; Kung C. G. ; Chen T. B. ; Rossi C. ; Vaughn D. W. ; Murphy G. S. ; Hayes C. G. 
Comparison of Two Rapid Diagnostic Assays for Detection of Immunoglobulin M Antibodies to Dengue Virus . Clin. Diagn. Lab. Immunol. 
2000 , 7 , 106 –110 .10618287 
Lien T. X. ; Tien N. T. ; Chanpong G. F. ; Cuc C. T. ; Yen V. T. ; Soderquist R. ; Laras K. ; Corwin A. 
Evaluation of Rapid Diagnostic Tests for the Detection of Human Immunodeficiency Virus Types 1 and 2, Hepatitis B Surface Antigen, and Syphilis in Ho Chi Minh City, Vietnam . Am. J. Trop. Med. Hyg. 
2000 , 62 , 301 –309 .10813489 
Skarbinski J. ; Ouma P. O. ; Causer L. M. ; Kariuki S. K. ; Barnwell J. W. ; Alaii J. A. ; de Oliveira A. M. ; Zurovac D. ; Larson B. A. ; Snow R. W. ; et al. Effect of Malaria Rapid Diagnostic Tests on the Management of Uncomplicated Malaria with Artemether-Lumefantrine in Kenya: A Cluster Randomized Trial . Am. J. Trop. Med. Hyg. 
2009 , 80 , 919 –926 .19478249 
Yager P. ; Edwards T. ; Fu E. ; Helton K. ; Nelson K. ; Tam M. R. ; Weigl B. H. 
Microfluidic Diagnostic Technologies for Global Public Health . Nature 
2006 , 442 , 412 –418 .16871209 
Sia S. K. ; Linder V. ; Parviz B. A. ; Siegel A. ; Whitesides G. M. 
An Integrated Approach to a Portable and Low-Cost Immunoassay for Resource-Poor Settings . Angew. Chem., Int. Ed. 
2004 , 43 , 498 –502 .
Moody A. 
Rapid Diagnostic Tests for Malaria Parasites . Clin. Microbiol. Rev. 
2002 , 15 , 66 –78 .11781267 
Dinnes J. ; Deeks J. ; Kunst H. ; Gibson A. ; Cummins E. ; Waugh N. ; Drobniewski F. ; Lalvani A. 
A Systematic Review of Rapid Diagnostic Tests for the Detection of Tuberculosis Infection . Health Technol. Assess. 
2007 , 11 , 1 –196 .17266837 
Bosker W. M. ; Huestis M. A. 
Oral Fluid Testing for Drugs of Abuse . Clin. Chem. 
2009 , 55 , 1910 –1931 .19745062 
Baker B. R. ; Lai R. Y. ; Wood M. S. ; Doctor E. H. ; Heeger A. J. ; Plaxco K. W. 
An Electronic, Aptamer-Based Small-Molecule Sensor for the Rapid, Label-Free Detection of Cocaine in Adulterated Samples and Biological Fluids . J. Am. Chem. Soc. 
2006 , 128 , 3138 –3139 .16522082 
Fan H. C. ; Blumenfeld Y. J. ; El-Sayed Y. Y. ; Chueh J. ; Quake S. R. 
Microfluidic Digital PCR Enables Rapid Prenatal Diagnosis of Fetal Aneuploidy . Am. J. Obstet. Gynecol. 
2009 , 200 , 543.e1 –543.e7 .19375573 
Sista R. ; Hua Z. ; Thwar P. ; Sudarsan A. ; Srinivasan V. ; Eckhardt A. ; Pollack M. ; Pamula V. 
Development of a Digital Microfluidic Platform for Point of Care Testing . Lab Chip 
2008 , 8 , 2091 –2104 .19023472 
Lee W. G. ; Kim Y.-G. ; Chung B. G. ; Demirci U. ; Khademhosseini A. 
Nano/Microfluidics for Diagnosis of Infectious Diseases in Developing Countries . Adv. Drug Delivery Rev. 
2010 , 62 , 449 –457 .
Adler R.  Health Care Unplugged: The Evolving Role of Wireless Technology ; California Healthcare Foundation : Sacramento, CA , 2007 .
Coskun A. F. ; Nagi R. ; Sadeghi K. ; Phillips S. ; Ozcan A. 
Albumin Testing in Urine Using a Smart-Phone . Lab Chip 
2013 , 13 , 4231 –4238 .23995895 
Coskun A. F. ; Wong J. ; Khodadadi D. ; Nagi R. ; Tey A. ; Ozcan A. 
A Personalized Food Allergen Testing Platform on a Cellphone . Lab Chip 
2013 , 13 , 636 –640 .23254910 
Haeberle S. ; Zengerle R. 
Microfluidic Platforms for Lab-on-a-Chip Applications . Lab Chip 
2007 , 7 , 1094 –1110 .17713606 
Jaksch F. L. ; Tay S. ; Coskun A. F. ; Ozcan A. 
Computational Imaging, Sensing and Diagnostics for Global Health Applications . Curr. Opin. Biotechnol. 
2014 , 25 , 8 –16 .24484875 
Mckiernan G. 
World Wide Mobile Phone Adoption and Libraries . Searcher 
2013 , 18 , 48 –52 .
Navruz I. ; Coskun A. F. ; Wong J. ; Mohammad S. ; Tseng D. ; Nagi R. ; Phillips S. ; Ozcan A. 
Smart-Phone Based Computational Microscopy Using Multi-Frame Contact Imaging on a Fiber-Optic Array . Lab Chip 
2013 , 13 , 4015 –4023 .23939637 
Wei Q. ; Nagi R. ; Sadeghi K. ; Feng S. ; Yan E. ; Ki S. J. ; Caire R. ; Tseng D. ; Ozcan A. 
Detection and Spatial Mapping of Mercury Contamination in Water Samples Using a Smart-Phone . ACS Nano 
2014 , 8 , 1121 –1129 .24437470 
Wei Q. ; Qi H. ; Luo W. ; Tseng D. ; Ki S. J. ; Wan Z. ; Göröcs Z. ; Bentolila L. A. ; Wu T.-T. ; Sun R. ; et al. Fluorescent Imaging of Single Nanoparticles and Viruses on a Smart Phone . Wide-Field Fluorescent Microscopy and Fluorescent Imaging Flow Cytometry on a Cell-PhoneACS Nano 
2013 , 7 , 9147 –9155 .
Zhu H. ; Ozcan A. 
Wide-Field Fluorescent Microscopy and Fluorescent Imaging Flow Cytometry on a Cell-Phone . J. Visualized Exp. 
2013 , e50451 .
Zhu H. ; Sencan I. ; Wong J. ; Dimitrov S. ; Tseng D. ; Nagashima K. ; Ozcan A. 
Cost-Effective and Rapid Blood Analysis on a Cell-Phone . Lab Chip 
2013 , 13 , 1282 –1288 .23392286 
Roggen D. ; Magnenat S. ; Waibel M. ; Tröster G. 
Wearable Computing . IEEE Rob. Autom. Mag. 
2011 , 18 , 83 –95 .
Farina D. ; Cianca E. ; Marchetti N. ; Frattasi S. 
Special Issue: Wearable Computing and Communication for e-Health . Med. Biol. Eng. Comput. 
2012 , 50 , 1117 –1118 .23099553 
Swan M. 
Sensor Mania! The Internet of Things, Wearable Computing, Objective Metrics, and the Quantified Self 2.0 . J. Sens. Actuator Networks 
2012 , 1 , 217 –253 .
Starner T. 
Project Glass: An Extension of the Self . IEEE Pervasive Comput. 
2013 , 12 , 14 –16 .
Torborg S. ; Simpson S.   Google Glass Teardown, http://www.catwig.com/google-glass-teardown/ (accessed Jan 26, 2014 ).
QRcode.com | DENSO WAVE, http://www.qrcode.com/en/index.html (accessed Jan 26, 2014 ).
Kim S. ; Park J.-K. 
Development of a Test Strip Reader for a Lateral Flow Membrane-Based Immunochromatographic Assay . Biotechnol. Bioprocess Eng. 
2004 , 9 , 127 –131 .
Kuswandi B. ; Nuriman ; Huskens J. ; Verboom W. 
Optical Sensing Systems for Microfluidic Devices: A Review . Anal. Chim. Acta 
2007 , 601 , 141 –155 .17920386 
Lee D.-S. ; Jeon B. G. ; Ihm C. ; Park J.-K. ; Jung M. Y. 
A Simple and Smart Telemedicine Device for Developing Regions: A Pocket-Sized Colorimetric Reader . Lab Chip 
2011 , 11 , 120 –126 .21109898 
Li J. J. ; Ouellette A. L. ; Giovangrandi L. ; Cooper D. E. ; Ricco A. J. ; Kovacs G. T. A. 
Optical Scanner for Immunoassays with Up-converting Phosphorescent Labels . IEEE Trans. Biomed. Eng. 
2008 , 55 , 1560 –1571 .18440902 
Li Z. ; Wang Y. ; Wang J. ; Tang Z. ; Pounds J. G. ; Lin Y. 
Rapid and Sensitive Detection of Protein Biomarker Using a Portable Fluorescence Biosensor Based on Quantum Dots and a Lateral Flow Test Strip . Anal. Chem. 
2010 , 82 , 7008 –7014 .20704391 
Li Z. ; Wang Y. ; Wang J. ; Tang Z. ; Pounds J. G. ; Lin Y. 
Rapid and Sensitive Detection of Protein Biomarker Using a Portable Fluorescence Biosensor Based on Quantum Dots and a Lateral Flow Test Strip . Anal. Chem. 
2010 , 82 , 7008 –7014 .20704391 
Nikitin P. I. ; Vetoshko P. M. ; Ksenevich T. I. 
New Type of Biosensor Based on Magnetic Nanoparticle Detection . J. Magn. Magn. Mater. 
2007 , 311 , 445 –449 .
Wongwilai W. ; Lapanantnoppakhun S. ; Grudpan S. ; Grudpan K. 
Webcam Camera as a Detector for a Simple Lab-on-Chip Time Based Approach . Talanta 
2010 , 81 , 1137 –1141 .20298905 
Zhang X. ; Li D. ; Wang C. ; Zhi X. ; Zhang C. ; Wang K. ; Cui D. 
A CCD-Based Reader Combined Quantum Dots-Labeled Lateral Flow Strips for Ultrasensitive Quantitative Detection of Anti-HBs Antibody . J. Biomed. Nanotechnol. 
2012 , 8 , 372 –379 .22764406 
Zhu H. ; Isikman S. O. ; Mudanyali O. ; Greenbaum A. ; Ozcan A. 
Optical Imaging Techniques for Point-of-Care Diagnostics . Lab Chip 
2013 , 13 , 51 –67 .23044793 
Mudanyali O. ; Dimitrov S. ; Sikora U. ; Padmanabhan S. ; Navruz I. ; Ozcan A. 
Integrated Rapid-Diagnostic-Test Reader Platform on a Cellphone . Lab Chip 
2012 , 12 , 2678 –2686 .22596243 
Shen L. ; Hagen J. A. ; Papautsky I. 
Point-of-Care Colorimetric Detection with a Smartphone . Lab Chip 
2012 , 12 , 4240 –4243 .22996728 
You D. J. ; Park T. S. ; Yoon J.-Y. 
Cell-Phone-Based Measurement of TSH Using Mie Scatter Optimized Lateral Flow Assays . Biosens. Bioelectron. 
2013 , 40 , 180 –185 .22863118 
Cooper D. ; Callahan B. ; Callahan P. ; Burnett L. 
Mobile Image Ratiometry: A New Method for Instantaneous Analysis of Rapid Test Strips . Nat. Preced. 
2012 , 10.1038/npre.2012.6827 .
Schröder F. H. ; Hugosson J. ; Roobol M. J. ; Tammela T. L. J. ; Ciatto S. ; Nelen V. ; Kwiatkowski M. ; Lujan M. ; Lilja H. ; Zappa M. ; et al. Prostate-Cancer Mortality at 11 Years of Follow-Up . N. Engl. J. Med. 
2012 , 366 , 981 –990 .22417251 
Thompson I. M. ; Pauler D. K. ; Goodman P. J. ; Tangen C. M. ; Lucia M. S. ; Parnes H. L. ; Minasian L. M. ; Ford L. G. ; Lippman S. M. ; Crawford E. D. ; et al. Prevalence of Prostate Cancer Among Men with a Prostate-Specific Antigen Level ≤4.0 ng Per Milliliter . N. Engl. J. Med. 
2004 , 350 , 2239 –2246 .15163773 
D’Amico A. V ; Chen M.-H. ; Roehl K. A. ; Catalona W. J. 
Preoperative PSA Velocity and the Risk of Death from Prostate Cancer after Radical Prostatectomy . N. Engl. J. Med. 
2004 , 351 , 125 –135 .15247353 
Thompson I. M. ; Ankerst D. P. ; Chi C. ; Lucia M. S. ; Goodman P. J. ; Crowley J. J. ; Parnes H. L. ; Coltman C. A. 
Operating Characteristics of Prostate-Specific Antigen in Men with an Initial PSA Level of 3.0 ng/mL or Lower . JAMA 
2005 , 294 , 66 –70 .15998892 
Nkenfou C. ; Kembou J. ; Temgoua E. ; Djikeng A. ; Mouafo L. ; Ndzie E. ; Donkam I. ; Colizzi V. ; SanouSobzé M. 
Evaluation of Oraquick® HIV-1/2 as Oral Rapid Test . African J. Infect. Dis. 
2013 , 7 , 27 –30 .
Zachary D. ; Mwenge L. ; Muyoyeta M. ; Shanaube K. ; Schaap A. ; Bond V. ; Kosloff B. ; de Haas P. ; Ayles H. 
Field Comparison of OraQuick ADVANCE Rapid HIV-1/2 Antibody Test and Two Blood-Based Rapid HIV Antibody Tests in Zambia . BMC Infect. Dis. 
2012 , 12 , 183 .22871032 
Greenwald J. L. ; Burstein G. R. ; Pincus J. ; Branson B. 
A Rapid Review of Rapid HIV Antibody Tests . Curr. Infect. Dis. Rep. 
2006 , 8 , 125 –131 .16524549 
Reynolds S. J. ; Ndongala L. M. ; Luo C.-C. ; Mwandagalirwa K. ; Losoma A. J. ; Mwamba K. J. ; Bazepeyo E. ; Nzilambi N. E. ; Quinn T. C. ; Bollinger R. C. 
Evaluation of a Rapid Test for the Detection of Antibodies to Human Immunodeficiency Virus Type 1 and 2 in the Setting of Multiple Transmitted Viral Subtypes . Int. J. STD AIDS 
2002 , 13 , 171 –173 .11860693 
Ligoha D. R.  Suitability of Rapid PSA Test for Prostate Cancer Screening in Tanzania ; Muhimbili University of Health and Allied Sciences : Dar es Salaam, Tanzania , 2012 .
Payne H. ; Cornford P. 
Prostate-Specific Antigen: An Evolving Role in Diagnosis, Monitoring, and Treatment Evaluation in Prostate Cancer . Urol. Oncol.: Semin. Orig. Invest. 
2011 , 29 , 593 –601 .
Basch E. ; Oliver T. K. ; Vickers A. ; Thompson I. ; Kantoff P. ; Parnes H. ; Loblaw D. A. ; Roth B. ; Williams J. ; Nam R. K. 
Screening for Prostate Cancer with Prostate-Specific Antigen Testing: American Society of Clinical Oncology Provisional Clinical Opinion . J. Clin. Oncol. 
2012 , 30 , 3020 –3025 .22802323 
Noble W. S. 
What Is a Support Vector Machine? . Nat. Biotechnol. 
2006 , 24 , 1565 –1567 .17160063 
Theodoridis S. ; Koutroumbas K.  Linear Classifiers: Support Vector Machines . In Pattern Recognition , 4th ed.; Academic Press : New York , 2008 ; Vol. 2008 , p 984 .
Burges C. J. C. 
A Tutorial on Support Vector Machines for Pattern Recognition . Data Mining Knowl. Discovery 
1998 , 2 , 121 –167 .
Hastie T. ; Tibshirani R. ; Friedman J.  Model Assessment and Selection: Cross-Validation . In The Elements of Statistical Learning—Data Mining, Inference, and Prediction , 2 nd ed.; Springer : Berlin , 2009 ; p 764 .
Bay H. ; Ess A. ; Tuytelaars T. ; Van Gool L. 
Speeded-Up Robust Features (SURF) . Comput. Visualization Image Understanding 
2008 , 110 , 346 –359 .
Laganière R.  OpenCV 2 Computer Vision Application Programming Cookbook: Over 50 Recipes to Master This Library of Programming Functions for Real-Time Computer Vision ; Packt Publishing Ltd. : Birmingham, UK , 2011 ; p 287 .
Owen S.   ZXing—Multi-format 1D/2D barcode image processing library with clients for Android, Java, https://github.com/zxing/zxing (accessed Jan 26, 2014 ).
